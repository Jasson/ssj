Charles 抓包工具
################

不需要太多技术知识轻松实现抓包-非常直观
---------------------------------------

之前主要用来联调 APP 抓包http 包，线上 https 抓包时一直乱码没解决，今天花了半天时间彻底的解决了。

本文不在赘述教程内容只是把坑 填一填，教程参考下面引用文档。


坑一 误以为下载完 ssl.zip安装就好了，其实只是刚刚开始
----------------------------------------------------

博客抓是这么写的“这时候你就需要安装Charles的CA证书了，首先到去 http://www.charlesproxy.com/ssl.zip 下载CA证书文件。双击crt文件，选择总是信任就可以了”事实上这只是一个开始，并不是结束。

无论是在电脑上还是手机上抓包还需要填坑二和坑三， 手机填坑二，电脑填坑三




坑二 手机访问 http://charlesproxy.com/getssl 安装证书 抓包手机
--------------------------------------------------------------

查了好几个文章，都提到 访问 http://charlesproxy.com/getssl  或 在手机 Safari 浏览器中输入上图红框中的链接 ” chls.pro/ssl ” 安装，
这时候会遇到卡住或访问某个页面，这时候基本都不会成功的。意外在微信打开 看到 返回的是证书信息。


如何成功安装呢？以下几步版本iphone 手机:
1.启动 Charles(4.0注意版本)
2.在菜单 Proxy-> Proxy settings -> Proxies 找到 Port 默认是 8888
3.查看电脑 IP 地址
4.在手机 无线局域网找到自己的连接设置 http 代理，手动配置，配置上 2，3 步查找到的 ip 和端口号
5.手机访问  http://charlesproxy.com/getssl 安装证书 （这时候，背后会结合电脑信息生成了一个私有证书）在设置-通用找到描述文件安装后，有的手机还需要到关于本机-证书信任设置中开启完证书完全信任



坑三 双击crt文件，选择总是信任就可以了- 配置 抓包 pc
---------------------------------------------------

有了坑二，坑三比较好理解了，除了安装 crt 证书之外，关键要授信新证书，浏览器访问 http://charlesproxy.com/getssl ，下载私有证书，我是 mac 系统，找到钥匙串再找到证书，这时会看到不可信证书，设置完全信任就可以了。




`参考文档 <https://www.jianshu.com/p/fdd7c681929c>`_ 



